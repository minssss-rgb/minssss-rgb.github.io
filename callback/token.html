<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Get Access Token and copy</title>
</head>
<body>
  <h2>Get Access Token</h2>
  <p>
    OAuth 인증 후 자동으로 Access Token을 클립보드에 복사하거나,<br>
    아래 버튼을 클릭하여 수동으로 복사할 수 있습니다.
  </p>

  <!-- Access Token 복사 버튼 -->
  <button onclick="copyAccessToken()">🔑 Copy Access Token</button>

  <script>
    // URL에서 access_token 값 추출
    function getAccessTokenFromURL() {
      const urlParams = new URLSearchParams(window.location.hash.substring(1)); 
      return urlParams.get("access_token");
    }

    // access_token 값을 클립보드에 복사하는 함수
    function copyAccessToken() {
      const accessToken = getAccessTokenFromURL();

      if (accessToken) {
        navigator.clipboard.writeText(accessToken)
          .then(() => alert("Successfully copied!✅"))
          .catch(err => alert("Copy failed ❌: " + err));
      } else {
        alert("Can't find access token ❌");
      }
    }

    // 페이지 로드 시 자동 복사 시도
    window.onload = function() {
      copyAccessToken();
    };
  </script>
</body>
</html>
